<div id="root"></div>

<script>
document.addEventListener("DOMContentLoaded", e => {
    window.WrappedShowPlans(
        {
            guard: "<%= @guard %>",
            plans: <%= raw(available_plans(Shopifex.Plug.current_shop(@conn), @guard)) %>,
            redirect_after: "<%= @redirect_after %>",
            shop_url: "<%= shop_url(@conn) %>",
            plan_select_route: "<%= Application.get_env(:shopifex, :path_prefix, "") %>/payment/select-plan",
            shopify_api_key: "<%= Application.get_env(:shopifex, :api_key) %>",
            shopify_host: "<%= Shopifex.Plug.current_shopify_host(@conn) %>",
            session_token: "<%= Shopifex.Plug.session_token(@conn) %>",
            current_grants: "<%= current_grants(@conn) %>"
        }
    )
})
</script>
